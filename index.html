<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Veux-tu √™tre ma Valentine ? üåπ</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* --- RESET & BASE --- */
        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Poppins', sans-serif;
            height: 100dvh;
            width: 100vw;
            overflow: hidden;
            background: linear-gradient(135deg, #fff0f5 0%, #ffffff 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* --- BACKGROUND --- */
        #emoji-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
        .bg-emoji { position: absolute; opacity: 0.3; animation: floatUp linear infinite; filter: blur(1px); }
        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            20% { opacity: 0.4; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        /* --- CANVAS C√âL√âBRATION --- */
        #celebration-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1500; }

        /* --- CARTE --- */
        .card {
            background: rgba(255, 255, 255, 0.90);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 15px 50px rgba(255, 51, 102, 0.15);
            text-align: center;
            width: 90%;
            max-width: 500px;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 2px solid #fff;
            transition: opacity 0.5s, transform 0.5s;
        }
        .card.hidden { opacity: 0; transform: scale(0.8); pointer-events: none; }

        h1 { font-family: 'Dancing Script', cursive; color: #ff3366; font-size: 2.5rem; margin-bottom: 10px; }
        .main-emoji { font-size: 4rem; margin: 10px 0; animation: heartBeat 1.5s infinite; }
        @keyframes heartBeat { 0%, 100% { transform: scale(1); } 15% { transform: scale(1.15); } 30% { transform: scale(1); } }

        .quote-box { background: #fff5f8; padding: 15px; border-radius: 15px; margin: 15px 0; border-left: 4px solid #ff3366; width: 100%; min-height: 70px; display: flex; align-items: center; justify-content: center; }
        .quote-text { font-size: 1rem; color: #555; font-style: italic; }
        .question { font-size: 1.1rem; color: #444; font-weight: 600; margin: 15px 0 30px 0; }

        /* --- BOUTONS --- */
        .buttons-area { display: flex; gap: 20px; justify-content: center; width: 100%; min-height: 50px; }
        button {
            padding: 12px 30px; font-size: 1rem; border: none; border-radius: 50px; cursor: pointer;
            font-family: 'Poppins', sans-serif; font-weight: 600; z-index: 20;
        }
        #yesBtn { background: linear-gradient(45deg, #ff3366, #ff5e62); color: white; box-shadow: 0 4px 15px rgba(255, 51, 102, 0.4); transition: transform 0.2s; }
        #yesBtn:hover { transform: scale(1.05); }

        #noBtn { background: #f0f0f0; color: #666; transition: 0.1s; position: relative; }
        #noBtn.fixed-body { position: fixed !important; z-index: 9999; }
        
        /* Animation quand le bouton est fatigu√© */
        #noBtn.tired {
            background: #555 !important;
            color: #fff !important;
            animation: shake 0.5s infinite;
        }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            20% { transform: translate(-1px, -2px) rotate(-1deg); }
            40% { transform: translate(-3px, 0px) rotate(1deg); }
            60% { transform: translate(3px, 2px) rotate(0deg); }
            80% { transform: translate(1px, -1px) rotate(1deg); }
            100% { transform: translate(-1px, 2px) rotate(-1deg); }
        }

        /* --- MODALES --- */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 240, 245, 0.85); z-index: 10000;
            justify-content: center; align-items: center; padding: 20px;
            animation: fadeIn 0.5s ease-out; backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white; padding: 40px 30px; border-radius: 30px; text-align: center;
            max-width: 90%; width: 400px; position: relative;
            box-shadow: 0 20px 60px rgba(255, 51, 102, 0.3); border: 2px solid #ff3366;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .modal-img { width: 100%; border-radius: 15px; margin-bottom: 20px; border: 3px solid #ff3366; }
        .close-modal { position: absolute; top: 15px; right: 15px; background: #eee; width: 30px; height: 30px; border-radius: 50%; border: none; font-size: 1.2rem; cursor: pointer; }
        .big-heart { font-size: 5rem; display: block; margin-bottom: 10px; animation: heartBeat 1s infinite; }
        .return-btn { background: #333; color: white; width: 100%; margin-top: 15px; padding: 12px; border-radius: 50px; border: none; cursor: pointer; font-weight: 600; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes popIn { from { transform: scale(0.5); } to { transform: scale(1); } }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="emoji-bg"></div>
    <canvas id="celebration-canvas"></canvas>

    <div class="card" id="mainCard">
        <h1>Ma Valentine ?</h1>
        <div class="main-emoji">üíù</div>
        
        <div class="quote-box">
            <div class="quote-text" id="quoteText">Chargement...</div>
        </div>
        
        <p class="question">Accepterais-tu de rendre ce jour magique ?</p>
        
        <div class="buttons-area">
            <button id="yesBtn">OUI ! üíï</button>
            <button id="noBtn">Non</button>
        </div>
    </div>

    <div class="modal-overlay" id="successModal">
        <div class="modal-content">
            <button class="close-modal" id="closeSuccess">√ó</button>
            <span class="big-heart">ü•∞</span>
            <h2 style="color: #ff3366; margin-bottom: 10px; font-family: 'Dancing Script'; font-size: 2.5rem;">Yaaay !</h2>
            <p>Tu viens de rendre mon c≈ìur le plus heureux du monde !<br><b>Je t'aime ! ‚ù§Ô∏è</b></p>
        </div>
    </div>

    <div class="modal-overlay" id="errorModal">
        <div class="modal-content">
            <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi.pinimg.com%2Foriginals%2F2a%2F2f%2Fa0%2F2a2fa0db3179d4b4ec39d1a8a1eeda7d.jpg%3Fnii%3Dt&f=1&nofb=1" alt="Angry" class="modal-img">
            <p id="errorText" style="font-size: 1.1rem; color: #444; line-height: 1.5;"></p>
            <button class="return-btn" id="returnBtn">Retour üîô</button>
        </div>
    </div>

    <script>
        const quotes = ["Tu es mon aujourd'hui et tous mes demains.", "L'amour n'est pas ce qu'on trouve, c'est ce qu'on construit.", "Mon endroit pr√©f√©r√© est dans tes bras.", "Chaque jour avec toi est un cadeau."];
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const quoteText = document.getElementById('quoteText');
        const mainCard = document.getElementById('mainCard');
        const successModal = document.getElementById('successModal');
        const errorModal = document.getElementById('errorModal');
        const errorText = document.getElementById('errorText');
        const returnBtn = document.getElementById('returnBtn');
        let qIdx = 0;
        let isTired = false;

        // --- BACKGROUND INITIAL ---
        function initBg() {
            const container = document.getElementById('emoji-bg');
            const emojis = ['üåπ', 'üíñ', 'üíå', 'üå∏', '‚ú®'];
            for(let i=0; i<20; i++) {
                const el = document.createElement('div');
                el.className = 'bg-emoji';
                el.textContent = emojis[Math.floor(Math.random()*emojis.length)];
                el.style.left = Math.random()*100 + '%';
                el.style.fontSize = (Math.random()*20 + 20) + 'px';
                el.style.animationDuration = (Math.random()*15 + 10) + 's';
                el.style.animationDelay = (Math.random()*-20) + 's';
                container.appendChild(el);
            }
        }
        initBg();

        // --- CITATIONS ---
        setInterval(() => {
            quoteText.style.opacity = 0;
            setTimeout(() => {
                quoteText.textContent = `"${quotes[qIdx]}"`;
                quoteText.style.opacity = 1;
                qIdx = (qIdx + 1) % quotes.length;
            }, 500);
        }, 4000);
        quoteText.textContent = `"${quotes[0]}"`;

        // ==========================================
        // === GESTION DU BOUTON "NON" & FATIGUE ===
        // ==========================================
        
        // Timer de fatigue (1 minute)
        setTimeout(() => {
            isTired = true;
            noBtn.classList.add('tired');
            noBtn.innerHTML = "Non... ü•µ";
            // On s'assure qu'il est sur le body pour √™tre cliquable partout
            if (noBtn.parentNode !== document.body) {
                document.body.appendChild(noBtn);
                noBtn.classList.add('fixed-body');
            }
        }, 60000);

        function moveBtn() {
            if (isTired) return; // Si fatigu√©, il ne bouge plus

            if (noBtn.parentNode !== document.body) {
                document.body.appendChild(noBtn);
                noBtn.classList.add('fixed-body');
            }

            const maxX = window.innerWidth - noBtn.offsetWidth - 20;
            const maxY = window.innerHeight - noBtn.offsetHeight - 20;
            const newLeft = Math.max(20, Math.random() * maxX);
            const newTop = Math.max(20, Math.random() * maxY);

            noBtn.style.left = newLeft + "px";
            noBtn.style.top = newTop + "px";
        }

        noBtn.addEventListener('mouseover', moveBtn);
        noBtn.addEventListener('touchstart', (e) => {
            if(!isTired) { e.preventDefault(); moveBtn(); }
        });

        noBtn.addEventListener('click', () => {
            if(isTired) {
                showError("Ah non ! üòà<br>M√™me fatigu√©, je refuse d'√™tre cliqu√© !<br>R√©essaie avec le bouton rose !");
            }
        });

        // ==========================================
        // === ANTI-TRICHE / INSPECTION ===
        // ==========================================
        
        const cheatMsg = "Petit curieux ! üïµÔ∏è‚Äç‚ôÇÔ∏è<br>L'inspection du code est interdite !<br>Concentre-toi sur mon c≈ìur ‚ù§Ô∏è";
        
        function triggerCheat(e) {
            e.preventDefault();
            showError(cheatMsg);
            return false;
        }

        // Bloquer clic droit
        document.addEventListener('contextmenu', triggerCheat);

        // Bloquer touches F12, Ctrl+Shift+I, etc.
        document.addEventListener('keydown', (e) => {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) || 
                (e.ctrlKey && e.key === 'u')) {
                triggerCheat(e);
            }
        });

        // ==========================================
        // === SUCC√àS & PLUIE D'EMOJIS ===
        // ==========================================
        
        yesBtn.addEventListener('click', () => {
            mainCard.classList.add('hidden');
            if(noBtn.parentNode === document.body) noBtn.style.display = 'none';
            successModal.style.display = 'flex';
            startLoveRain();
        });

        function showError(msg) {
            errorText.innerHTML = msg;
            errorModal.style.display = 'flex';
        }

        returnBtn.addEventListener('click', () => errorModal.style.display = 'none');
        document.getElementById('closeSuccess').onclick = () => window.location.reload();

        // --- ANIMATION CANVAS ---
        const canvas = document.getElementById('celebration-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        const romanticEmojis = ['‚ù§Ô∏è', 'üíñ', 'üíù', 'üåπ', 'ü•∞', 'üíç', 'üíå', '‚ú®'];

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize);
        resize();

        class EmojiParticle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * -canvas.height;
                this.emoji = romanticEmojis[Math.floor(Math.random() * romanticEmojis.length)];
                this.size = Math.random() * 30 + 15;
                this.speed = Math.random() * 3 + 2;
                this.swing = Math.random() * 2 - 1;
            }
            update() {
                this.y += this.speed;
                this.x += Math.sin(this.y * 0.02) + this.swing;
                if (this.y > canvas.height) { this.y = -50; this.x = Math.random() * canvas.width; }
            }
            draw() {
                ctx.font = `${this.size}px Arial`;
                ctx.fillText(this.emoji, this.x, this.y);
            }
        }

        function startLoveRain() {
            particles = [];
            const count = window.innerWidth < 600 ? 50 : 100;
            for(let i=0; i<count; i++) particles.push(new EmojiParticle());
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => { p.update(); p.draw(); });
                requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>